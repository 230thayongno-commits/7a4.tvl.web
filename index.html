<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>7A4 GALAXY COMMAND</title>

  <!-- Fonts (gi·ªØ font c≈© n·∫øu b·∫°n c√≥, m√¨nh ch·ªâ b·ªï sung fallback ƒë·∫πp) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    /* =========================
       BASE / RESET
    ========================= */
    :root{
      --radius: 18px;
      --radius2: 26px;
      --shadow: 0 16px 50px rgba(0,0,0,.25);
      --shadow2: 0 10px 30px rgba(0,0,0,.2);
      --glass: rgba(255,255,255,.08);
      --glass2: rgba(255,255,255,.12);
      --border: rgba(255,255,255,.14);

      --text: #eaf3ff;
      --muted: rgba(234,243,255,.75);
      --danger: #ff3b6a;
      --success: #28f59a;

      --btnText: #0b0f18;
      --btnGlow: rgba(255,215,0,.35);
    }

    *{ box-sizing:border-box; }
    html,body{
      margin:0;
      padding:0;
      font-family: "Montserrat", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      min-height:100%;
    }

    /* ============ THEME TOKENS ============ */
    /* Galaxy */
    body[data-theme="galaxy"]{
      --bg1: #070a12;
      --bg2: #0b1a3a;
      --accent: #ffd54a;
      --accent2: #6cf0ff;
      --panel: rgba(255,255,255,.06);
      --panelBorder: rgba(255,255,255,.12);
      --titleGlow: 0 0 26px rgba(255,213,74,.35);
      --btnBg: linear-gradient(180deg, #ffe277, #ffb700);
      --btnBorder: rgba(255,215,0,.55);
      --btnText: #111;
    }

    /* Tet */
    body[data-theme="tet"]{
      --bg1: #7a0014;
      --bg2: #c20022;
      --accent: #ffd24a;
      --accent2: #ffefb0;
      --panel: rgba(255,215,0,.08);
      --panelBorder: rgba(255,215,0,.35);
      --titleGlow: 0 0 26px rgba(255,210,74,.55);
      --btnBg: linear-gradient(180deg, #ffe38a, #ffb700);
      --btnBorder: rgba(255,215,0,.7);
      --btnText: #3a0a0a;
    }

    body{
      color: var(--text);
      background: radial-gradient(circle at top, var(--bg2), var(--bg1));
      overflow-x:hidden;
    }

    /* Galaxy stars layer */
    body[data-theme="galaxy"]::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.9;
      background:
        radial-gradient(circle at 20% 15%, rgba(255,255,255,.18), transparent 40%),
        radial-gradient(circle at 70% 35%, rgba(108,240,255,.16), transparent 45%),
        radial-gradient(circle at 50% 80%, rgba(255,213,74,.12), transparent 50%),
        radial-gradient(circle at 15% 75%, rgba(255,255,255,.10), transparent 50%),
        radial-gradient(circle at 85% 85%, rgba(255,255,255,.08), transparent 50%);
      filter: blur(0px);
    }

    /* Tet pattern layer */
    body[data-theme="tet"]::before{
      content:"";
      position:fixed;
      inset:0;
      pointer-events:none;
      opacity:.35;
      background:
        radial-gradient(circle at 20% 15%, rgba(255,215,0,.25), transparent 45%),
        radial-gradient(circle at 80% 25%, rgba(255,215,0,.18), transparent 50%),
        radial-gradient(circle at 50% 85%, rgba(255,239,176,.12), transparent 55%);
      filter: blur(0px);
    }

    /* Floating petals/mai (Tet) */
    .mai-wrap{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:2;
      display:none;
    }
    body[data-theme="tet"] .mai-wrap{ display:block; }

    .mai{
      position:absolute;
      width:64px;
      height:64px;
      opacity:.9;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.25));
      animation: maiFloat 7s ease-in-out infinite;
      transform-origin:center;
    }
    .mai.small{ width:42px; height:42px; opacity:.85; animation-duration: 9s; }
    .mai.tiny{ width:32px; height:32px; opacity:.75; animation-duration: 11s; }

    @keyframes maiFloat{
      0%{ transform: translateY(0px) rotate(-2deg); }
      50%{ transform: translateY(10px) rotate(2deg); }
      100%{ transform: translateY(0px) rotate(-2deg); }
    }

    /* =========================
       LAYOUT
    ========================= */
    .screen{
      display:none;
      min-height:100vh;
      width:100%;
      padding: 28px 18px;
      position:relative;
      z-index:3;
    }
    .screen.active{ display:block; }

    .container{
      max-width: 980px;
      margin: 0 auto;
      width:100%;
    }

    /* Card / Panel */
    .panel{
      background: var(--panel);
      border: 1px solid var(--panelBorder);
      border-radius: var(--radius2);
      box-shadow: var(--shadow2);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      padding: 18px;
    }

    /* Titles */
    .hero{
      text-align:center;
      padding: 12px 0 22px;
    }
    .hero h1{
      margin: 0;
      font-size: clamp(34px, 5vw, 62px);
      letter-spacing: 1px;
      font-weight: 900;
      color: var(--accent);
      text-shadow: var(--titleGlow);
    }
    .hero p{
      margin: 10px 0 0;
      font-size: 13px;
      letter-spacing: 2px;
      text-transform: uppercase;
      color: var(--muted);
      font-weight: 700;
    }

    /* Buttons */
    .btn{
      cursor:pointer;
      border:none;
      border-radius: 999px;
      padding: 12px 18px;
      font-weight: 800;
      letter-spacing: .2px;
      background: var(--btnBg);
      color: var(--btnText);
      box-shadow: 0 14px 30px rgba(0,0,0,.18);
      transition: transform .15s ease, filter .15s ease;
      position:relative;
      overflow:hidden;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:hover{ transform: translateY(-1px); filter: brightness(1.03); }
    .btn:active{ transform: translateY(1px) scale(.99); }

    .btn-outline{
      background: transparent;
      color: var(--text);
      border: 1px solid var(--panelBorder);
      box-shadow:none;
      font-weight: 800;
    }

    .btn-danger{
      background: linear-gradient(180deg, #ff6a8c, #ff2f61);
      color: #fff;
    }

    /* Grid */
    .grid{
      display:grid;
      gap: 14px;
    }

    /* Responsive */
    @media (min-width: 760px){
      .panel{ padding: 22px; }
      .grid.cols-2{ grid-template-columns: 1fr 1fr; }
      .grid.cols-4{ grid-template-columns: repeat(4, 1fr); }
    }

    /* =========================
       SELECTOR SCREEN (CH·ªåN T·ªî)
    ========================= */
    #selector-screen{
      /* FIX: background b·ªã tr·∫Øng -> √©p theo theme */
      background: transparent !important;
    }

    .team-grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 16px;
      max-width: 520px;
      margin: 22px auto 0;
    }

    .team-btn{
      padding: 16px 14px;
      border-radius: 18px;
      font-size: 16px;
      font-weight: 900;
      letter-spacing: .4px;
      background: var(--panel);
      border: 1px solid var(--panelBorder);
      color: var(--text);
      box-shadow: var(--shadow2);
      cursor:pointer;
      transition: transform .15s ease, background .15s ease, border-color .15s ease;
      text-align:center;
    }
    .team-btn:hover{ transform: translateY(-2px); }
    .team-btn:active{ transform: translateY(1px) scale(.99); }

    .team-btn[data-team="1"]{ color:#ffd54a; }
    .team-btn[data-team="2"]{ color:#ff4d4d; }
    .team-btn[data-team="3"]{ color:#ff4db8; }
    .team-btn[data-team="4"]{ color:#3bff7a; }

    /* =========================
       SETTINGS BUTTON (STYLE SWITCH)
    ========================= */
    .top-actions{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 16px;
    }

    .settings-card{
      margin: 18px auto 0;
      max-width: 560px;
    }
    .settings-row{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      padding-top: 10px;
    }

    /* =========================
       NOTIFICATION "CHAT BUBBLE"
    ========================= */
    .toast-wrap{
      position: fixed;
      right: 14px;
      bottom: 14px;
      z-index: 9999;
      display:flex;
      flex-direction:column;
      gap:10px;
      pointer-events:none;
    }
    .toast{
      pointer-events:none;
      max-width: min(360px, calc(100vw - 28px));
      background: rgba(10, 14, 26, .72);
      border: 1px solid rgba(255,255,255,.14);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      color: #fff;
      padding: 12px 14px;
      border-radius: 18px;
      box-shadow: var(--shadow);
      display:flex;
      gap:10px;
      align-items:flex-start;
      animation: toastIn .25s ease-out;
    }
    body[data-theme="tet"] .toast{
      background: rgba(60, 0, 10, .72);
      border-color: rgba(255,215,0,.25);
    }
    .toast .dot{
      width: 10px; height:10px; border-radius:999px;
      margin-top: 4px;
      background: var(--accent2);
      box-shadow: 0 0 16px rgba(255,255,255,.25);
      flex: 0 0 auto;
    }
    .toast .title{
      font-weight: 900;
      font-size: 13px;
      margin:0 0 4px;
      color: var(--accent);
    }
    .toast .msg{
      font-size: 13px;
      margin:0;
      opacity:.95;
      line-height:1.35;
    }
    @keyframes toastIn{
      from{ transform: translateY(12px); opacity:0; }
      to{ transform: translateY(0px); opacity:1; }
    }

    /* =========================
       FIREWORKS (click effect)
    ========================= */
    .fx-layer{
      position: fixed;
      inset:0;
      pointer-events:none;
      z-index: 9998;
      overflow:hidden;
    }
    .spark{
      position:absolute;
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent);
      box-shadow: 0 0 18px rgba(255,215,0,.45);
      animation: spark 700ms ease-out forwards;
      opacity:1;
    }
    @keyframes spark{
      to{
        transform: translate(var(--dx), var(--dy)) scale(0.2);
        opacity:0;
      }
    }

    /* Make Tet UI more "m√†u m√®" */
    body[data-theme="tet"] .panel{
      border: 1px solid rgba(255,215,0,.42);
      box-shadow: 0 18px 55px rgba(0,0,0,.35);
    }
    body[data-theme="tet"] .team-btn{
      border: 1px solid rgba(255,215,0,.5);
      background: rgba(255,215,0,.08);
    }

    /* Small improvements for mobile */
    @media (max-width: 420px){
      .team-grid{ gap: 12px; }
      .team-btn{ padding: 14px 12px; font-size: 15px; }
    }
  </style>
</head>

<body data-theme="galaxy">
  <!-- FX Layers -->
  <div class="fx-layer" id="fx-layer"></div>

  <!-- Tet Mai layer -->
  <div class="mai-wrap" aria-hidden="true">
    <!-- SVG hoa mai (t·ª± t·∫°o) -->
    <svg class="mai" style="left:8%; top:12%" viewBox="0 0 100 100">
      <g fill="#ffd24a">
        <path d="M50 14c6 10 6 18 0 26-6-8-6-16 0-26z"/>
        <path d="M86 50c-10 6-18 6-26 0 8-6 16-6 26 0z"/>
        <path d="M50 86c-6-10-6-18 0-26 6 8 6 16 0 26z"/>
        <path d="M14 50c10-6 18-6 26 0-8 6-16 6-26 0z"/>
        <path d="M74 26c0 12-4 18-14 22 2-10 6-16 14-22z"/>
        <path d="M26 26c8 6 12 12 14 22-10-4-14-10-14-22z"/>
        <path d="M26 74c0-12 4-18 14-22-2 10-6 16-14 22z"/>
        <path d="M74 74c-8-6-12-12-14-22 10 4 14 10 14 22z"/>
      </g>
      <circle cx="50" cy="50" r="9" fill="#ffb700"/>
    </svg>

    <svg class="mai small" style="left:78%; top:18%" viewBox="0 0 100 100">
      <g fill="#ffd24a">
        <path d="M50 14c6 10 6 18 0 26-6-8-6-16 0-26z"/>
        <path d="M86 50c-10 6-18 6-26 0 8-6 16-6 26 0z"/>
        <path d="M50 86c-6-10-6-18 0-26 6 8 6 16 0 26z"/>
        <path d="M14 50c10-6 18-6 26 0-8 6-16 6-26 0z"/>
      </g>
      <circle cx="50" cy="50" r="9" fill="#ffb700"/>
    </svg>

    <svg class="mai tiny" style="left:16%; top:72%" viewBox="0 0 100 100">
      <g fill="#ffd24a">
        <path d="M50 14c6 10 6 18 0 26-6-8-6-16 0-26z"/>
        <path d="M86 50c-10 6-18 6-26 0 8-6 16-6 26 0z"/>
        <path d="M50 86c-6-10-6-18 0-26 6 8 6 16 0 26z"/>
        <path d="M14 50c10-6 18-6 26 0-8 6-16 6-26 0z"/>
      </g>
      <circle cx="50" cy="50" r="9" fill="#ffb700"/>
    </svg>

    <svg class="mai small" style="left:84%; top:78%" viewBox="0 0 100 100">
      <g fill="#ffd24a">
        <path d="M50 14c6 10 6 18 0 26-6-8-6-16 0-26z"/>
        <path d="M86 50c-10 6-18 6-26 0 8-6 16-6 26 0z"/>
        <path d="M50 86c-6-10-6-18 0-26 6 8 6 16 0 26z"/>
        <path d="M14 50c10-6 18-6 26 0-8 6  -16 6-26 0z"/>
      </g>
      <circle cx="50" cy="50" r="9" fill="#ffb700"/>
    </svg>
  </div>

  <!-- Toast -->
  <div class="toast-wrap" id="toast-wrap"></div>

  <!-- =========================
       SCREEN: SELECT TEAM
  ========================= -->
  <section class="screen active" id="selector-screen">
    <div class="container">
      <div class="hero">
        <h1>7A4 GALAXY<br/>COMMAND</h1>
        <p>H·ªÜ TH·ªêNG √îN T·∫¨P HK2</p>

        <div class="top-actions">
          <!-- N√∫t admin (FIX CLICK) -->
          <button class="btn btn-outline" id="btn-admin">ADMIN</button>
          <button class="btn btn-outline" id="btn-settings">C√ÄI ƒê·∫∂T PHONG C√ÅCH</button>
        </div>
      </div>

      <div class="team-grid">
        <button class="team-btn" data-team="1">T·ªï 1</button>
        <button class="team-btn" data-team="2">T·ªï 2</button>
        <button class="team-btn" data-team="3">T·ªï 3</button>
        <button class="team-btn" data-team="4">T·ªï 4</button>
      </div>

      <!-- Settings Panel -->
      <div class="panel settings-card" id="settings-panel" style="display:none;">
        <div style="text-align:center; font-weight:900; font-size:14px; letter-spacing:1px; color:var(--accent);">
          CH·ªåN PHONG C√ÅCH GAME
        </div>
        <div class="settings-row">
          <button class="btn" id="theme-galaxy">Galaxy</button>
          <button class="btn" id="theme-tet">T·∫øt</button>
        </div>
      </div>
    </div>
  </section>

  <!-- =========================
       (C√ÅC SCREEN KH√ÅC C·ª¶A B·∫†N)
       => M√¨nh gi·ªØ nguy√™n logic, ch·ªâ ƒë·∫£m b·∫£o theme apply to√†n b·ªô
       => B·∫°n paste ph·∫ßn code c≈© c·ªßa b·∫°n v√†o ƒë√¢y n·∫øu c√≥.
  ========================= -->

  <!-- V√≠ d·ª• placeholder: menu/admin/english/math -->
  <section class="screen" id="menu-screen">
    <div class="container">
      <div class="panel">
        <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
          <div style="font-weight:900; font-size:18px; color:var(--accent);">MENU</div>
          <button class="btn btn-outline" id="back-to-selector">Quay l·∫°i</button>
        </div>
        <div style="margin-top:14px; color:var(--muted); font-weight:700;">
          (Gi·ªØ nguy√™n menu c·ªßa b·∫°n - ph·∫ßn n√†y ch·ªâ l√† khung ƒë·ªÉ demo theme apply)
        </div>
      </div>
    </div>
  </section>

  <section class="screen" id="admin-screen">
    <div class="container">
      <div class="panel">
        <div style="display:flex; justify-content:space-between; align-items:center; gap:12px; flex-wrap:wrap;">
          <div style="font-weight:900; font-size:18px; color:var(--accent);">ADMIN</div>
          <button class="btn btn-outline" id="admin-back">Quay l·∫°i</button>
        </div>
        <div style="margin-top:14px; color:var(--muted); font-weight:700;">
          (Admin UI c·ªßa b·∫°n v·∫´n gi·ªØ nguy√™n ‚Äî m√¨nh ch·ªâ fix n√∫t Admin kh√¥ng click)
        </div>
      </div>
    </div>
  </section>

  <script>
    /* =========================
       THEME SYSTEM (Galaxy / Tet)
       Apply to ALL UI screens
    ========================= */
    const THEME_KEY = "A4_THEME_STYLE";
    const body = document.body;

    function setTheme(theme){
      body.setAttribute("data-theme", theme);
      localStorage.setItem(THEME_KEY, theme);
      toast("Phong c√°ch", theme === "tet" ? "ƒê√£ chuy·ªÉn sang giao di·ªán T·∫øt üéâ" : "ƒê√£ chuy·ªÉn sang giao di·ªán Galaxy ‚ú®");
    }

    (function initTheme(){
      const saved = localStorage.getItem(THEME_KEY);
      if(saved === "tet" || saved === "galaxy"){
        body.setAttribute("data-theme", saved);
      }else{
        body.setAttribute("data-theme", "galaxy");
      }
    })();

    /* =========================
       FIX: ADMIN BUTTON NOT CLICK
       - ƒë·∫£m b·∫£o kh√¥ng b·ªã overlay ch·∫∑n
       - d√πng addEventListener ch·∫Øc ch·∫Øn
    ========================= */
    const btnAdmin = document.getElementById("btn-admin");
    const btnSettings = document.getElementById("btn-settings");
    const settingsPanel = document.getElementById("settings-panel");

    const themeGalaxy = document.getElementById("theme-galaxy");
    const themeTet = document.getElementById("theme-tet");

    function showScreen(id){
      document.querySelectorAll(".screen").forEach(s => s.classList.remove("active"));
      const el = document.getElementById(id);
      if(el) el.classList.add("active");
    }

    // FIX CLICK: admin
    btnAdmin.addEventListener("click", (e)=>{
      fireworks(e);
      showScreen("admin-screen");
    });

    // settings toggle
    btnSettings.addEventListener("click", (e)=>{
      fireworks(e);
      settingsPanel.style.display = settingsPanel.style.display === "none" ? "block" : "none";
    });

    themeGalaxy.addEventListener("click", (e)=>{
      fireworks(e);
      setTheme("galaxy");
    });
    themeTet.addEventListener("click", (e)=>{
      fireworks(e);
      setTheme("tet");
    });

    // Team choose => go menu (gi·ªØ logic c·ªßa b·∫°n n·∫øu kh√°c)
    document.querySelectorAll(".team-btn").forEach(btn=>{
      btn.addEventListener("click", (e)=>{
        fireworks(e);
        const team = btn.getAttribute("data-team");
        toast("Ch·ªçn t·ªï", "B·∫°n ƒë√£ ch·ªçn T·ªï " + team);
        // TODO: ·ªü code c·ªßa b·∫°n c√≥ th·ªÉ chuy·ªÉn sang menu/to√°n/anh
        showScreen("menu-screen");
      });
    });

    // back buttons
    const backToSelector = document.getElementById("back-to-selector");
    if(backToSelector){
      backToSelector.addEventListener("click", (e)=>{
        fireworks(e);
        showScreen("selector-screen");
      });
    }

    const adminBack = document.getElementById("admin-back");
    if(adminBack){
      adminBack.addEventListener("click", (e)=>{
        fireworks(e);
        showScreen("selector-screen");
      });
    }

    /* =========================
       TOAST (chat-like notification)
    ========================= */
    const toastWrap = document.getElementById("toast-wrap");
    function toast(title, msg){
      const el = document.createElement("div");
      el.className = "toast";
      el.innerHTML = `
        <div class="dot"></div>
        <div>
          <p class="title">${escapeHtml(title)}</p>
          <p class="msg">${escapeHtml(msg)}</p>
        </div>
      `;
      toastWrap.appendChild(el);
      setTimeout(()=>{ el.style.opacity = "0"; el.style.transform = "translateY(10px)"; }, 2200);
      setTimeout(()=>{ el.remove(); }, 2600);
    }

    function escapeHtml(str){
      return String(str)
        .replaceAll("&","&amp;")
        .replaceAll("<","&lt;")
        .replaceAll(">","&gt;")
        .replaceAll('"',"&quot;")
        .replaceAll("'","&#039;");
    }

    /* =========================
       FIREWORKS CLICK EFFECT
       (n·ªï ph√°o b√¥ng khi b·∫•m n√∫t)
    ========================= */
    const fxLayer = document.getElementById("fx-layer");

    function fireworks(e){
      // t·∫°o hi·ªáu ·ª©ng ·ªü v·ªã tr√≠ click
      const x = (e.touches && e.touches[0]) ? e.touches[0].clientX : e.clientX;
      const y = (e.touches && e.touches[0]) ? e.touches[0].clientY : e.clientY;

      const count = 16;
      for(let i=0;i<count;i++){
        const s = document.createElement("div");
        s.className = "spark";
        s.style.left = (x - 4) + "px";
        s.style.top = (y - 4) + "px";

        const angle = (Math.PI * 2) * (i / count);
        const dist = 40 + Math.random()*35;
        const dx = Math.cos(angle) * dist;
        const dy = Math.sin(angle) * dist;

        s.style.setProperty("--dx", dx + "px");
        s.style.setProperty("--dy", dy + "px");

        fxLayer.appendChild(s);
        setTimeout(()=> s.remove(), 800);
      }
    }

    // apply fireworks to ALL buttons (ƒë·∫πp h∆°n)
    document.addEventListener("click", (e)=>{
      const t = e.target;
      if(t && (t.classList.contains("btn") || t.classList.contains("team-btn"))){
        fireworks(e);
      }
    }, true);

  </script>
</body>
</html>
